
---
---
<div id="reading-progress-wrapper"
  class="pointer-events-none fixed top-0 left-0 z-50 w-full h-2 bg-transparent"     
  aria-hidden="true">
  <div id="reading-progress-bar"
       class="h-full bg-indigo-600 transition-[width] duration-150 ease-out rounded-lg"
       style="width:0%"></div>
</div>
<script is:inline>
  const bar = document.getElementById('reading-progress-bar');

  function update() {
    const {scrollTop, scrollHeight, clientHeight} = document.documentElement;
    const max = scrollHeight - clientHeight;
    const percent = (scrollTop / max) * 100;
    bar.style.width = percent + '%';
    const threshold = 99.5; 
    bar.style.opacity = percent >= threshold ? '0' : '1';

  }

  update();
  window.addEventListener('scroll', update, {passive: true});
  window.addEventListener('resize', update);
</script>
